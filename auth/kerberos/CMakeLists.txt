cmake_minimum_required(VERSION 3.10)

project(kerberos)

file(
        COPY ${CMAKE_CURRENT_SOURCE_DIR}/src/kube2krb.py
        DESTINATION "/usr/sbin/"
        FILE_PERMISSIONS OWNER_READ OWNER_WRITE OWNER_EXECUTE GROUP_READ GROUP_EXECUTE WORLD_READ WORLD_EXECUTE
)

file(
        COPY ../../auth/kerberos/tests/kubeconfig.json
        DESTINATION ${CMAKE_CURRENT_BINARY_DIR}/../../
        FILE_PERMISSIONS OWNER_READ OWNER_WRITE OWNER_EXECUTE GROUP_READ GROUP_EXECUTE WORLD_READ WORLD_EXECUTE
)
file(
        COPY ../../auth/kerberos/tests/contoso_webapp01.json
        DESTINATION ${CMAKE_CURRENT_BINARY_DIR}/../../
        FILE_PERMISSIONS OWNER_READ OWNER_WRITE OWNER_EXECUTE GROUP_READ GROUP_EXECUTE WORLD_READ WORLD_EXECUTE
)
file(
        COPY ../../auth/kerberos/tests/contoso_webapp03.json
        DESTINATION ${CMAKE_CURRENT_BINARY_DIR}/../../
        FILE_PERMISSIONS OWNER_READ OWNER_WRITE OWNER_EXECUTE GROUP_READ GROUP_EXECUTE WORLD_READ WORLD_EXECUTE
)

enable_testing ()
